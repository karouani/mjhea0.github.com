<div class="highlight"><pre><code class="text">before(function(done) {
    db = mongoose.connect(&#39;mongodb://localhost/test&#39;);
        done();
});

after(function(done) {
    mongoose.connection.close();
    done();
});

beforeEach(function(done) {
    var account = new Account({
        username: &#39;12345&#39;,
        password: &#39;testy&#39;
    });

    account.save(function(error) {
        if (error) console.log(&#39;error&#39; + error.message);
        else console.log(&#39;no error&#39;);
        done();
    });
});

it(&#39;find a user by username&#39;, function(done) {
    Account.findOne({ username: &#39;12345&#39; }, function(err, account) {
        account.username.should.eql(&#39;12345&#39;);
        console.log(&quot;   username: &quot;, account.username);
        done();
    });
});

afterEach(function(done) {
    Account.remove({}, function() {
        done();
    });
 });
</code></pre>
</div>
